@using Core.Features.Image
@model Core.Features.Image.ImageViewModel

@if (Model == null)
{
    return;
}

@{
// NB! This is not working correctly! I'm using the same width for viewport and image width, and those are not equal
// The window size is much larger than the image size.
    
    const int imageWidth = 300;
    const int imageHeight = 200;
}

<figure>
    <picture>
        @foreach (var source in Model.GetImageSources(imageWidth, imageHeight))
        {
            <source media="@source.Media" srcset="@source.SrcSet">
        }
        <img src="@Model.GetUrl(imageWidth, imageHeight)" alt="@Model.AltText" width="@imageWidth" height="@imageHeight">
    </picture>
</figure>
